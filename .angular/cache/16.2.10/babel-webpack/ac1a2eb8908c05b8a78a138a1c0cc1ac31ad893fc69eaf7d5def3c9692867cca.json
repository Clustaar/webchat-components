{"ast":null,"code":"import { EventEmitter, SecurityContext } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/platform-browser\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../obfuscation/obfuscation.pipe\";\nfunction UserMessageConsoleActionComponent_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 5);\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵstyleProp(\"border-right-color\", ctx_r0.userBubbleColor);\n  }\n}\nfunction UserMessageConsoleActionComponent_span_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 6);\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵstyleProp(\"border-left-color\", ctx_r1.userBubbleColor);\n  }\n}\nconst _c0 = function (a0, a1) {\n  return {\n    \"bot\": a0,\n    \"user\": a1\n  };\n};\nexport class UserMessageConsoleActionComponent {\n  constructor(cdr, sanitizer) {\n    this.cdr = cdr;\n    this.sanitizer = sanitizer;\n    this.inverted = false;\n    this.autoScroll = true;\n    this.userBubbleColor = '#C5DBEA';\n    this.userTextColor = '#2C3F59';\n    this.onLoadNextAction = new EventEmitter();\n    this.onLastActionRendered = new EventEmitter();\n  }\n  ngOnInit() {\n    this.message = this.sanitizer.sanitize(SecurityContext.HTML, this.action.message);\n    if (this.autoScroll) {\n      setTimeout(() => {\n        let element = document.getElementById('chat-console-messages');\n        if (element != null) {\n          element.scrollTop = element.scrollHeight - element.clientHeight;\n          this.cdr.markForCheck();\n        }\n      }, 500);\n    }\n    this.cdr.markForCheck();\n  }\n  ngAfterViewInit() {\n    setTimeout(() => {\n      this.onLastActionRendered.emit(true);\n      this.cdr.markForCheck();\n    }, 0);\n  }\n  /** @nocollapse */\n  static #_ = this.ɵfac = function UserMessageConsoleActionComponent_Factory(t) {\n    return new (t || UserMessageConsoleActionComponent)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i1.DomSanitizer));\n  };\n  /** @nocollapse */\n  static #_2 = this.ɵcmp = /** @pureOrBreakMyCode */i0.ɵɵdefineComponent({\n    type: UserMessageConsoleActionComponent,\n    selectors: [[\"user-message-console-action\"]],\n    inputs: {\n      action: \"action\",\n      inverted: \"inverted\",\n      autoScroll: \"autoScroll\",\n      userBubbleColor: \"userBubbleColor\",\n      userTextColor: \"userTextColor\"\n    },\n    outputs: {\n      onLoadNextAction: \"onLoadNextAction\",\n      onLastActionRendered: \"onLastActionRendered\"\n    },\n    decls: 6,\n    vars: 14,\n    consts: [[1, \"console-text-type\"], [1, \"bubble\", 3, \"ngClass\"], [\"class\", \"bubble-arrow\", 3, \"border-right-color\", 4, \"ngIf\"], [1, \"user-message\", 3, \"innerHTML\"], [\"class\", \"bubble-arrow-right\", 3, \"border-left-color\", 4, \"ngIf\"], [1, \"bubble-arrow\"], [1, \"bubble-arrow-right\"]],\n    template: function UserMessageConsoleActionComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        i0.ɵɵtemplate(2, UserMessageConsoleActionComponent_span_2_Template, 1, 2, \"span\", 2);\n        i0.ɵɵelement(3, \"span\", 3);\n        i0.ɵɵpipe(4, \"obfuscation\");\n        i0.ɵɵtemplate(5, UserMessageConsoleActionComponent_span_5_Template, 1, 2, \"span\", 4);\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵstyleProp(\"background-color\", ctx.userBubbleColor);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(11, _c0, ctx.inverted, !ctx.inverted));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.inverted);\n        i0.ɵɵadvance(1);\n        i0.ɵɵstyleProp(\"color\", ctx.userTextColor);\n        i0.ɵɵproperty(\"innerHTML\", i0.ɵɵpipeBind2(4, 8, ctx.message, ctx.userTextColor), i0.ɵɵsanitizeHtml);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", !ctx.inverted);\n      }\n    },\n    dependencies: [i2.NgClass, i2.NgIf, i3.ObfuscationPipe],\n    styles: [\"ul[_ngcontent-%COMP%], ol[_ngcontent-%COMP%] {\\n  white-space: normal !important;\\n}\\n\\n.bubble-arrow[_ngcontent-%COMP%], .bubble-arrow-right[_ngcontent-%COMP%] {\\n  position: absolute;\\n  bottom: 0px;\\n  border-width: 8px;\\n  border-bottom: 0;\\n  border-top: 8px solid transparent;\\n  top: calc(100% - 8px);\\n}\\n\\n.bubble-arrow[_ngcontent-%COMP%] {\\n  left: 0;\\n  border-left: 0;\\n  margin-left: -8px;\\n  border-right-style: solid;\\n}\\n\\n.bubble-arrow-right[_ngcontent-%COMP%] {\\n  right: 0;\\n  border-right: 0;\\n  margin-right: -8px;\\n  border-left-style: solid;\\n}\\n\\n.bubble[_ngcontent-%COMP%] {\\n  font: 14px/16px Heebo;\\n}\\n.bubble[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\\n  color: inherit;\\n}\\n\\n.console-text-type[_ngcontent-%COMP%]   .bubble[_ngcontent-%COMP%] {\\n  position: relative;\\n  padding: 12px;\\n  border-radius: 12px;\\n}\\n.console-text-type[_ngcontent-%COMP%]   .bubble.user[_ngcontent-%COMP%] {\\n  margin: 16px 8px 0 24px;\\n  word-break: break-word;\\n  color: #2c3f59;\\n  border-bottom-right-radius: 0;\\n  background: #c5dbea;\\n  float: right;\\n}\\n.console-text-type[_ngcontent-%COMP%]   .bubble.bot[_ngcontent-%COMP%] {\\n  margin: 16px 24px 0 8px;\\n  word-break: break-word;\\n  color: #2c3f59;\\n  border-bottom-left-radius: 0;\\n  background: #c5dbea;\\n  float: left;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3Byb2plY3RzL2NsdXN0YWFyLXdlYmNoYXQtY29tcG9uZW50cy9zcmMvbGliL3NoYXJlZC5zY3NzIiwid2VicGFjazovLy4vcHJvamVjdHMvY2x1c3RhYXItd2ViY2hhdC1jb21wb25lbnRzL3NyYy9saWIvdXNlci1tZXNzYWdlL3VzZXItbWVzc2FnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsOEJBQUE7QUNDRjs7QURFQTtFQUNFLGtCQUFBO0VBQ0EsV0FBQTtFQUNBLGlCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxpQ0FBQTtFQUNBLHFCQUFBO0FDQ0Y7O0FERUE7RUFDRSxPQUFBO0VBQ0EsY0FBQTtFQUNBLGlCQUFBO0VBQ0EseUJBQUE7QUNDRjs7QURFQTtFQUNFLFFBQUE7RUFDQSxlQUFBO0VBQ0Esa0JBQUE7RUFDQSx3QkFBQTtBQ0NGOztBREVBO0VBQ0UscUJBQUE7QUNDRjtBREFFO0VBQ0UsY0FBQTtBQ0VKOztBQTdCRTtFQUNFLGtCQUFBO0VBRUEsYUFBQTtFQUVBLG1CQUFBO0FBOEJKO0FBNUJJO0VBQ0UsdUJBQUE7RUFDQSxzQkFBQTtFQUNBLGNBQUE7RUFDQSw2QkFBQTtFQUNBLG1CQUFBO0VBQ0EsWUFBQTtBQThCTjtBQTNCSTtFQUNFLHVCQUFBO0VBQ0Esc0JBQUE7RUFDQSxjQUFBO0VBQ0EsNEJBQUE7RUFDQSxtQkFBQTtFQUNBLFdBQUE7QUE2Qk4iLCJzb3VyY2VzQ29udGVudCI6WyJ1bCwgb2wge1xuICB3aGl0ZS1zcGFjZTogbm9ybWFsICFpbXBvcnRhbnQ7XG59XG5cbi5idWJibGUtYXJyb3csIC5idWJibGUtYXJyb3ctcmlnaHQge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGJvdHRvbTogMHB4O1xuICBib3JkZXItd2lkdGg6IDhweDtcbiAgYm9yZGVyLWJvdHRvbTogMDtcbiAgYm9yZGVyLXRvcDogOHB4IHNvbGlkIHRyYW5zcGFyZW50O1xuICB0b3A6IGNhbGMoMTAwJSAtIDhweCk7XG59XG5cbi5idWJibGUtYXJyb3cge1xuICBsZWZ0OiAwO1xuICBib3JkZXItbGVmdDogMDtcbiAgbWFyZ2luLWxlZnQ6IC04cHg7XG4gIGJvcmRlci1yaWdodC1zdHlsZTogc29saWQ7XG59XG5cbi5idWJibGUtYXJyb3ctcmlnaHQge1xuICByaWdodDogMDtcbiAgYm9yZGVyLXJpZ2h0OiAwO1xuICBtYXJnaW4tcmlnaHQ6IC04cHg7XG4gIGJvcmRlci1sZWZ0LXN0eWxlOiBzb2xpZDtcbn1cblxuLmJ1YmJsZSB7XG4gIGZvbnQ6IDE0cHgvMTZweCBIZWVibztcbiAgYSB7XG4gICAgY29sb3I6IGluaGVyaXQ7XG4gIH1cbn1cbiIsIkBpbXBvcnQgJy4uL3NoYXJlZCc7XG5cbi5jb25zb2xlLXRleHQtdHlwZSB7XG4gIC5idWJibGUge1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcblxuICAgIHBhZGRpbmc6IDEycHg7XG5cbiAgICBib3JkZXItcmFkaXVzOiAxMnB4O1xuXG4gICAgJi51c2VyIHtcbiAgICAgIG1hcmdpbjogMTZweCA4cHggMCAyNHB4O1xuICAgICAgd29yZC1icmVhazogYnJlYWstd29yZDtcbiAgICAgIGNvbG9yOiAjMmMzZjU5O1xuICAgICAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDA7XG4gICAgICBiYWNrZ3JvdW5kOiAjYzVkYmVhO1xuICAgICAgZmxvYXQ6IHJpZ2h0O1xuICAgIH1cblxuICAgICYuYm90IHtcbiAgICAgIG1hcmdpbjogMTZweCAyNHB4IDAgOHB4O1xuICAgICAgd29yZC1icmVhazogYnJlYWstd29yZDtcbiAgICAgIGNvbG9yOiAjMmMzZjU5O1xuICAgICAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogMDtcbiAgICAgIGJhY2tncm91bmQ6ICNjNWRiZWE7XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICB9XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0= */\"],\n    changeDetection: 0\n  });\n}","map":{"version":3,"names":["EventEmitter","SecurityContext","i0","ɵɵelement","ɵɵstyleProp","ctx_r0","userBubbleColor","ctx_r1","UserMessageConsoleActionComponent","constructor","cdr","sanitizer","inverted","autoScroll","userTextColor","onLoadNextAction","onLastActionRendered","ngOnInit","message","sanitize","HTML","action","setTimeout","element","document","getElementById","scrollTop","scrollHeight","clientHeight","markForCheck","ngAfterViewInit","emit","ɵɵdirectiveInject","ChangeDetectorRef","i1","DomSanitizer","selectors","inputs","outputs","decls","vars","consts","template","UserMessageConsoleActionComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtemplate","UserMessageConsoleActionComponent_span_2_Template","UserMessageConsoleActionComponent_span_5_Template","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","ɵɵpureFunction2","_c0","ɵɵpipeBind2","ɵɵsanitizeHtml"],"sources":["/home/smez/apps/webchat-components/projects/clustaar-webchat-components/src/lib/user-message/user-message.ts","/home/smez/apps/webchat-components/projects/clustaar-webchat-components/src/lib/user-message/user-message.html"],"sourcesContent":["import {\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  EventEmitter,\n  Input,\n  OnInit,\n  Output,\n  SecurityContext\n} from '@angular/core';\nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser';\n\n@Component({\n  selector: 'user-message-console-action',\n  templateUrl: './user-message.html',\n  styleUrls: ['./user-message.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class UserMessageConsoleActionComponent\n  implements OnInit, AfterViewInit\n{\n  @Input() action: any;\n  @Input() inverted: boolean = false;\n  @Input() autoScroll? = true;\n  @Input() userBubbleColor: string = '#C5DBEA';\n  @Input() userTextColor: string = '#2C3F59';\n  @Output() onLoadNextAction = new EventEmitter<boolean>();\n  @Output() onLastActionRendered: EventEmitter<boolean> =\n    new EventEmitter<boolean>();\n\n  message: SafeHtml;\n\n  constructor(\n    private cdr: ChangeDetectorRef,\n    protected sanitizer: DomSanitizer\n  ) {}\n\n  ngOnInit() {\n    this.message = this.sanitizer.sanitize(\n      SecurityContext.HTML,\n      this.action.message\n    );\n    if (this.autoScroll) {\n      setTimeout(() => {\n        let element = document.getElementById('chat-console-messages');\n        if (element != null) {\n          element.scrollTop = element.scrollHeight - element.clientHeight;\n          this.cdr.markForCheck();\n        }\n      }, 500);\n    }\n    this.cdr.markForCheck();\n  }\n\n  ngAfterViewInit() {\n    setTimeout(() => {\n      this.onLastActionRendered.emit(true);\n      this.cdr.markForCheck();\n    }, 0);\n  }\n}\n","<div class=\"console-text-type\">\n  <div class=\"bubble\" [ngClass]=\"{'bot' : inverted, 'user': !inverted}\" [style.background-color]=\"userBubbleColor\">\n    <span *ngIf=\"inverted\" [style.border-right-color]=\"userBubbleColor\" class=\"bubble-arrow\"></span>\n    <span [style.color]=\"userTextColor\" class=\"user-message\" [innerHTML]=\"message | obfuscation: userTextColor\"></span>\n    <span *ngIf=\"!inverted\" [style.border-left-color]=\"userBubbleColor\" class=\"bubble-arrow-right\"></span>\n  </div>\n</div>\n"],"mappings":"AAAA,SAKEA,YAAY,EAIZC,eAAe,QACV,eAAe;;;;;;;ICRlBC,EAAA,CAAAC,SAAA,cAAgG;;;;IAAzED,EAAA,CAAAE,WAAA,uBAAAC,MAAA,CAAAC,eAAA,CAA4C;;;;;IAEnEJ,EAAA,CAAAC,SAAA,cAAsG;;;;IAA9ED,EAAA,CAAAE,WAAA,sBAAAG,MAAA,CAAAD,eAAA,CAA2C;;;;;;;;;ADevE,OAAM,MAAOE,iCAAiC;EAc5CC,YACUC,GAAsB,EACpBC,SAAuB;IADzB,KAAAD,GAAG,GAAHA,GAAG;IACD,KAAAC,SAAS,GAATA,SAAS;IAZZ,KAAAC,QAAQ,GAAY,KAAK;IACzB,KAAAC,UAAU,GAAI,IAAI;IAClB,KAAAP,eAAe,GAAW,SAAS;IACnC,KAAAQ,aAAa,GAAW,SAAS;IAChC,KAAAC,gBAAgB,GAAG,IAAIf,YAAY,EAAW;IAC9C,KAAAgB,oBAAoB,GAC5B,IAAIhB,YAAY,EAAW;EAO1B;EAEHiB,QAAQA,CAAA;IACN,IAAI,CAACC,OAAO,GAAG,IAAI,CAACP,SAAS,CAACQ,QAAQ,CACpClB,eAAe,CAACmB,IAAI,EACpB,IAAI,CAACC,MAAM,CAACH,OAAO,CACpB;IACD,IAAI,IAAI,CAACL,UAAU,EAAE;MACnBS,UAAU,CAAC,MAAK;QACd,IAAIC,OAAO,GAAGC,QAAQ,CAACC,cAAc,CAAC,uBAAuB,CAAC;QAC9D,IAAIF,OAAO,IAAI,IAAI,EAAE;UACnBA,OAAO,CAACG,SAAS,GAAGH,OAAO,CAACI,YAAY,GAAGJ,OAAO,CAACK,YAAY;UAC/D,IAAI,CAAClB,GAAG,CAACmB,YAAY,EAAE;;MAE3B,CAAC,EAAE,GAAG,CAAC;;IAET,IAAI,CAACnB,GAAG,CAACmB,YAAY,EAAE;EACzB;EAEAC,eAAeA,CAAA;IACbR,UAAU,CAAC,MAAK;MACd,IAAI,CAACN,oBAAoB,CAACe,IAAI,CAAC,IAAI,CAAC;MACpC,IAAI,CAACrB,GAAG,CAACmB,YAAY,EAAE;IACzB,CAAC,EAAE,CAAC,CAAC;EACP;;;qBAzCWrB,iCAAiC,EAAAN,EAAA,CAAA8B,iBAAA,CAAA9B,EAAA,CAAA+B,iBAAA,GAAA/B,EAAA,CAAA8B,iBAAA,CAAAE,EAAA,CAAAC,YAAA;EAAA;;;UAAjC3B,iCAAiC;IAAA4B,SAAA;IAAAC,MAAA;MAAAhB,MAAA;MAAAT,QAAA;MAAAC,UAAA;MAAAP,eAAA;MAAAQ,aAAA;IAAA;IAAAwB,OAAA;MAAAvB,gBAAA;MAAAC,oBAAA;IAAA;IAAAuB,KAAA;IAAAC,IAAA;IAAAC,MAAA;IAAAC,QAAA,WAAAC,2CAAAC,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;QCnB9C1C,EAAA,CAAA4C,cAAA,aAA+B;QAE3B5C,EAAA,CAAA6C,UAAA,IAAAC,iDAAA,kBAAgG;QAChG9C,EAAA,CAAAC,SAAA,cAAmH;;QACnHD,EAAA,CAAA6C,UAAA,IAAAE,iDAAA,kBAAsG;QACxG/C,EAAA,CAAAgD,YAAA,EAAM;;;QAJgEhD,EAAA,CAAAiD,SAAA,GAA0C;QAA1CjD,EAAA,CAAAE,WAAA,qBAAAyC,GAAA,CAAAvC,eAAA,CAA0C;QAA5FJ,EAAA,CAAAkD,UAAA,YAAAlD,EAAA,CAAAmD,eAAA,KAAAC,GAAA,EAAAT,GAAA,CAAAjC,QAAA,GAAAiC,GAAA,CAAAjC,QAAA,EAAiD;QAC5DV,EAAA,CAAAiD,SAAA,GAAc;QAAdjD,EAAA,CAAAkD,UAAA,SAAAP,GAAA,CAAAjC,QAAA,CAAc;QACfV,EAAA,CAAAiD,SAAA,GAA6B;QAA7BjD,EAAA,CAAAE,WAAA,UAAAyC,GAAA,CAAA/B,aAAA,CAA6B;QAAsBZ,EAAA,CAAAkD,UAAA,cAAAlD,EAAA,CAAAqD,WAAA,OAAAV,GAAA,CAAA3B,OAAA,EAAA2B,GAAA,CAAA/B,aAAA,GAAAZ,EAAA,CAAAsD,cAAA,CAAkD;QACpGtD,EAAA,CAAAiD,SAAA,GAAe;QAAfjD,EAAA,CAAAkD,UAAA,UAAAP,GAAA,CAAAjC,QAAA,CAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}