{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nfunction WaitConsoleActionComponent_div_0_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 7);\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵstyleProp(\"border-right-color\", ctx_r1.primaryColor);\n  }\n}\nfunction WaitConsoleActionComponent_div_0_span_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 8);\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵstyleProp(\"border-left-color\", ctx_r2.primaryColor);\n  }\n}\nconst _c0 = function (a0, a1) {\n  return {\n    \"bot\": a0,\n    \"user\": a1\n  };\n};\nfunction WaitConsoleActionComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2);\n    i0.ɵɵtemplate(2, WaitConsoleActionComponent_div_0_span_2_Template, 1, 2, \"span\", 3);\n    i0.ɵɵelementStart(3, \"span\", 4);\n    i0.ɵɵelement(4, \"span\", 5)(5, \"span\", 5)(6, \"span\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, WaitConsoleActionComponent_div_0_span_7_Template, 1, 2, \"span\", 6);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"background-color\", ctx_r0.primaryColor);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(11, _c0, !ctx_r0.inverted, ctx_r0.inverted));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.inverted);\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleProp(\"background-color\", ctx_r0.textColor);\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"background-color\", ctx_r0.textColor);\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"background-color\", ctx_r0.textColor);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.inverted);\n  }\n}\nexport class WaitConsoleActionComponent {\n  constructor(cdr) {\n    this.cdr = cdr;\n    this.inverted = false;\n    this.primaryColor = '#30B286';\n    this.textColor = '#FFFFFF';\n    this.autoScroll = true;\n    this.onLoadNextAction = new EventEmitter();\n    this.onLastActionRendered = new EventEmitter();\n    this.isOver = false;\n  }\n  ngOnInit() {\n    if (this.autoScroll) {\n      setTimeout(() => {\n        let element = document.getElementById('chat-console-messages');\n        if (element) {\n          element.scrollTop = element.scrollHeight - element.clientHeight;\n          this.cdr.markForCheck();\n        }\n      }, 500);\n    }\n    let timeoutDelay = this.action.duration * 1000;\n    setTimeout(() => {\n      // self.onActionDelayed.emit(true);\n      this.onLoadNextAction.emit(true);\n      // me.store.dispatch(new console_.LoadNextAction({}, me.target));\n      this.isOver = true;\n      this.cdr.markForCheck();\n    }, timeoutDelay);\n    if (this.action.isPublished != null && this.action.isPublished == true) {\n      this.isOver = true;\n    }\n    this.cdr.markForCheck();\n  }\n  ngAfterViewInit() {\n    setTimeout(() => {\n      this.onLastActionRendered.emit(true);\n      this.cdr.markForCheck();\n    }, 0);\n  }\n  /** @nocollapse */\n  static #_ = this.ɵfac = function WaitConsoleActionComponent_Factory(t) {\n    return new (t || WaitConsoleActionComponent)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n  };\n  /** @nocollapse */\n  static #_2 = this.ɵcmp = /** @pureOrBreakMyCode */i0.ɵɵdefineComponent({\n    type: WaitConsoleActionComponent,\n    selectors: [[\"wait-console-action\"]],\n    inputs: {\n      action: \"action\",\n      inverted: \"inverted\",\n      primaryColor: \"primaryColor\",\n      textColor: \"textColor\",\n      autoScroll: \"autoScroll\"\n    },\n    outputs: {\n      onLoadNextAction: \"onLoadNextAction\",\n      onLastActionRendered: \"onLastActionRendered\"\n    },\n    decls: 1,\n    vars: 1,\n    consts: [[\"class\", \"console-wait-type\", 4, \"ngIf\"], [1, \"console-wait-type\"], [1, \"bubble\", 3, \"ngClass\"], [\"class\", \"bubble-arrow\", 3, \"border-right-color\", 4, \"ngIf\"], [1, \"dots-wave\"], [1, \"dot\"], [\"class\", \"bubble-arrow-right\", 3, \"border-left-color\", 4, \"ngIf\"], [1, \"bubble-arrow\"], [1, \"bubble-arrow-right\"]],\n    template: function WaitConsoleActionComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, WaitConsoleActionComponent_div_0_Template, 8, 14, \"div\", 0);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", !ctx.isOver);\n      }\n    },\n    styles: [\".console-wait-type[_ngcontent-%COMP%]   .bubble[_ngcontent-%COMP%] {\\n  position: relative;\\n  width: 80px;\\n  padding: 12px;\\n  text-align: center;\\n  border-radius: 12px;\\n}\\n.console-wait-type[_ngcontent-%COMP%]   .bubble.bot[_ngcontent-%COMP%] {\\n  margin: 16px 24px 0 8px;\\n  color: #FFFFFF;\\n  border-bottom-left-radius: 0;\\n  background: #30B286;\\n  float: left;\\n}\\n.console-wait-type[_ngcontent-%COMP%]   .bubble.user[_ngcontent-%COMP%] {\\n  margin: 16px 8px 0 24px;\\n  word-break: break-all;\\n  color: #FFFFFF;\\n  border-bottom-right-radius: 0;\\n  background: #30B286;\\n  float: right;\\n}\\n.console-wait-type[_ngcontent-%COMP%]   .dots-wave[_ngcontent-%COMP%] {\\n  position: relative;\\n  margin-top: 50vh;\\n  text-align: center;\\n  width: 100px;\\n  height: 100px;\\n  margin-right: 8px;\\n  margin-left: 4px;\\n}\\n.console-wait-type[_ngcontent-%COMP%]   .dots-wave[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%] {\\n  display: inline-block;\\n  width: 4px;\\n  height: 4px;\\n  border-radius: 50%;\\n  margin-right: 3px;\\n  background: #303131;\\n  animation: _ngcontent-%COMP%_wave 1.3s linear infinite;\\n}\\n.console-wait-type[_ngcontent-%COMP%]   .dots-wave[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(2) {\\n  animation-delay: -1.1s;\\n}\\n.console-wait-type[_ngcontent-%COMP%]   .dots-wave[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(3) {\\n  animation-delay: -0.9s;\\n}\\n@keyframes _ngcontent-%COMP%_wave {\\n  0%, 60%, 100% {\\n    transform: initial;\\n  }\\n  30% {\\n    transform: translateY(-15px);\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3Byb2plY3RzL2NsdXN0YWFyLXdlYmNoYXQtY29tcG9uZW50cy9zcmMvbGliL3dhaXQvd2FpdC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFRTtFQUNFLGtCQUFBO0VBRUEsV0FBQTtFQUVBLGFBQUE7RUFFQSxrQkFBQTtFQUVBLG1CQUFBO0FBTEo7QUFPSTtFQUNFLHVCQUFBO0VBRUEsY0FBQTtFQUNBLDRCQUFBO0VBQ0EsbUJBQUE7RUFDQSxXQUFBO0FBTk47QUFTSTtFQUNFLHVCQUFBO0VBQ0EscUJBQUE7RUFDQSxjQUFBO0VBQ0EsNkJBQUE7RUFDQSxtQkFBQTtFQUNBLFlBQUE7QUFQTjtBQVdFO0VBQ0Usa0JBQUE7RUFDQSxnQkFBQTtFQUNBLGtCQUFBO0VBQ0EsWUFBQTtFQUNBLGFBQUE7RUFDQSxpQkFBQTtFQUNBLGdCQUFBO0FBVEo7QUFXSTtFQUNFLHFCQUFBO0VBQ0EsVUFBQTtFQUNBLFdBQUE7RUFDQSxrQkFBQTtFQUNBLGlCQUFBO0VBQ0EsbUJBQUE7RUFDQSxvQ0FBQTtBQVROO0FBV007RUFDRSxzQkFBQTtBQVRSO0FBWU07RUFDRSxzQkFBQTtBQVZSO0FBZUU7RUFDRTtJQUNFLGtCQUFBO0VBYko7RUFnQkU7SUFDRSw0QkFBQTtFQWRKO0FBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJcbi5jb25zb2xlLXdhaXQtdHlwZSB7XG4gIC5idWJibGUge1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcblxuICAgIHdpZHRoOiA4MHB4O1xuXG4gICAgcGFkZGluZzogMTJweDtcblxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcblxuICAgIGJvcmRlci1yYWRpdXM6IDEycHg7XG5cbiAgICAmLmJvdCB7XG4gICAgICBtYXJnaW46IDE2cHggMjRweCAwIDhweDtcblxuICAgICAgY29sb3I6ICNGRkZGRkY7XG4gICAgICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiAwO1xuICAgICAgYmFja2dyb3VuZDogIzMwQjI4NjtcbiAgICAgIGZsb2F0OiBsZWZ0O1xuICAgIH1cblxuICAgICYudXNlciB7XG4gICAgICBtYXJnaW46IDE2cHggOHB4IDAgMjRweDtcbiAgICAgIHdvcmQtYnJlYWs6IGJyZWFrLWFsbDtcbiAgICAgIGNvbG9yOiAjRkZGRkZGO1xuICAgICAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDA7XG4gICAgICBiYWNrZ3JvdW5kOiAjMzBCMjg2O1xuICAgICAgZmxvYXQ6IHJpZ2h0O1xuICAgIH1cbiAgfVxuXG4gIC5kb3RzLXdhdmUge1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICBtYXJnaW4tdG9wOiA1MHZoO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICB3aWR0aDogMTAwcHg7XG4gICAgaGVpZ2h0OiAxMDBweDtcbiAgICBtYXJnaW4tcmlnaHQ6IDhweDtcbiAgICBtYXJnaW4tbGVmdDogNHB4O1xuXG4gICAgLmRvdCB7XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICB3aWR0aDogNHB4O1xuICAgICAgaGVpZ2h0OiA0cHg7XG4gICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICBtYXJnaW4tcmlnaHQ6IDNweDtcbiAgICAgIGJhY2tncm91bmQ6ICMzMDMxMzE7XG4gICAgICBhbmltYXRpb246IHdhdmUgMS4zcyBsaW5lYXIgaW5maW5pdGU7XG5cbiAgICAgICY6bnRoLWNoaWxkKDIpIHtcbiAgICAgICAgYW5pbWF0aW9uLWRlbGF5OiAtMS4xcztcbiAgICAgIH1cblxuICAgICAgJjpudGgtY2hpbGQoMykge1xuICAgICAgICBhbmltYXRpb24tZGVsYXk6IC0wLjlzO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIEBrZXlmcmFtZXMgd2F2ZSB7XG4gICAgMCUsIDYwJSwgMTAwJSB7XG4gICAgICB0cmFuc2Zvcm06IGluaXRpYWw7XG4gICAgfVxuXG4gICAgMzAlIHtcbiAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMTVweCk7XG4gICAgfVxuICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9 */\"],\n    changeDetection: 0\n  });\n}","map":{"version":3,"names":["EventEmitter","i0","ɵɵelement","ɵɵstyleProp","ctx_r1","primaryColor","ctx_r2","ɵɵelementStart","ɵɵtemplate","WaitConsoleActionComponent_div_0_span_2_Template","ɵɵelementEnd","WaitConsoleActionComponent_div_0_span_7_Template","ɵɵadvance","ctx_r0","ɵɵproperty","ɵɵpureFunction2","_c0","inverted","textColor","WaitConsoleActionComponent","constructor","cdr","autoScroll","onLoadNextAction","onLastActionRendered","isOver","ngOnInit","setTimeout","element","document","getElementById","scrollTop","scrollHeight","clientHeight","markForCheck","timeoutDelay","action","duration","emit","isPublished","ngAfterViewInit","ɵɵdirectiveInject","ChangeDetectorRef","selectors","inputs","outputs","decls","vars","consts","template","WaitConsoleActionComponent_Template","rf","ctx","WaitConsoleActionComponent_div_0_Template"],"sources":["/home/smez/apps/webchat-components/projects/clustaar-webchat-components/src/lib/wait/wait.component.ts","/home/smez/apps/webchat-components/projects/clustaar-webchat-components/src/lib/wait/wait.component.html"],"sourcesContent":["import {\n  Component,\n  EventEmitter,\n  Input,\n  OnInit,\n  Output,\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef\n} from '@angular/core';\n\n@Component({\n  selector: 'wait-console-action',\n  templateUrl: './wait.component.html',\n  styleUrls: ['./wait.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class WaitConsoleActionComponent implements OnInit, AfterViewInit {\n  @Input() action: any;\n  @Input() inverted = false;\n  @Input() primaryColor = '#30B286';\n  @Input() textColor = '#FFFFFF';\n  @Input() autoScroll? = true;\n  @Output() onLoadNextAction = new EventEmitter<boolean>();\n  @Output() onLastActionRendered: EventEmitter<boolean> = new EventEmitter<boolean>();\n\n  isOver = false;\n\n  constructor(private cdr: ChangeDetectorRef) {\n  }\n\n  ngOnInit() {\n    if (this.autoScroll) {\n      setTimeout(() => {\n        let element = document.getElementById('chat-console-messages');\n        if (element) {\n          element.scrollTop = element.scrollHeight - element.clientHeight;\n          this.cdr.markForCheck();\n        }\n      }, 500);\n    }\n\n    let timeoutDelay = this.action.duration * 1000;\n\n    setTimeout(() => {\n      // self.onActionDelayed.emit(true);\n      this.onLoadNextAction.emit(true);\n      // me.store.dispatch(new console_.LoadNextAction({}, me.target));\n      this.isOver = true;\n      this.cdr.markForCheck();\n    }, timeoutDelay);\n\n    if (this.action.isPublished != null && this.action.isPublished == true) {\n      this.isOver = true;\n    }\n    this.cdr.markForCheck();\n  }\n\n  ngAfterViewInit() {\n    setTimeout(() => {\n      this.onLastActionRendered.emit(true);\n      this.cdr.markForCheck();\n    }, 0);\n  }\n}\n","<div *ngIf=\"!isOver\" class=\"console-wait-type\">\n  <div [style.background-color]=\"primaryColor\" class=\"bubble\" [ngClass]=\"{'bot': !inverted, 'user': inverted}\">\n    <span *ngIf=\"!inverted\" [style.border-right-color]=\"primaryColor\" class=\"bubble-arrow\"></span>\n    <span class=\"dots-wave\">\n      <span class=\"dot\" [style.backgroundColor]=\"textColor\"></span>\n      <span class=\"dot\" [style.backgroundColor]=\"textColor\"></span>\n      <span class=\"dot\" [style.backgroundColor]=\"textColor\"></span>\n    </span>\n    <span *ngIf=\"inverted\" [style.border-left-color]=\"primaryColor\" class=\"bubble-arrow-right\"></span>\n  </div>\n</div>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}