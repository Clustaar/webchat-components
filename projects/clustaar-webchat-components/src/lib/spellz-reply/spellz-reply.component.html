<div class="console-spellz-reply-type" [dir]="inverted ? 'rtl' : 'ltr'">
  <div class="console-spellz-reply">
    <div class="agent-icon">
      <div class="agent-icon-container">
        <svg version="1.1" id="Logo_Spellz_Shape" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px"
        y="0px" viewBox="0 0 600 600" style="enable-background:new 0 0 600 600;" xml:space="preserve">
        <style type="text/css">
          .st0{fill:url(#SVGID_1_);}
        </style>
        <linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="127.0878" y1="525.3477" x2="454.6354" y2="134.9908" gradientTransform="matrix(1 0 0 -1 0 602)">
          <stop  offset="0" style="stop-color:#5928B3"/>
          <stop  offset="0.27" style="stop-color:#5C29B1"/>
          <stop  offset="0.44" style="stop-color:#642CAB"/>
          <stop  offset="0.57" style="stop-color:#7232A1"/>
          <stop  offset="0.69" style="stop-color:#863A93"/>
          <stop  offset="0.8" style="stop-color:#A14580"/>
          <stop  offset="0.9" style="stop-color:#C15269"/>
          <stop  offset="1" style="stop-color:#E6614E"/>
          <stop  offset="1" style="stop-color:#E8624D"/>
        </linearGradient>
        <path class="st0" d="M525.8,108.7C481.5,66.2,399.1,25,300,25c-99.3,0-164.3,42.8-211,83.8S12,200.4,3.2,262.6
          c-9,62.8,0.9,103.7,32.8,150.8c47.6,70.3,184.5,99.5,220.8,108.6c32.6,8.2,41.5,26.9,24.8,36.1c-23.1,12.7-28.7,16.9,0,16.9
          c39.8,0,74-48.1-17.3-105.1c-12.3-7.9-46.8-27.3-28.3-58.6c16.8-28.8,64-19.4,64-19.4c20.4,3.5,38.7,13.4,57.9,23
          c1.8,0.9,3.7,1.8,5.5,2.7c82.8,39.1,181.7,3.7,220.8-79.2c5.1-10.7,9-21.9,11.6-33.5c2.5-13.4,4.2-26.3,4.2-38.8
          C600,208.2,577.4,158,525.8,108.7z"/>
        </svg>

      </div>
  
    </div>

    <div dir="ltr" class="bubble" [ngClass]="{'bot' : ! inverted, 'user': inverted}" [style.background-color]="primaryColor">
      <span *ngIf="!inverted" [style.border-right-color]="primaryColor" class="bubble-arrow"></span>
      <span [style.color]="textColor" class="agent-reply-message-{{indexAction}}" [innerHTML]="message | obfuscation: textColor"></span>
      <span *ngIf="inverted" [style.border-left-color]="primaryColor" class="bubble-arrow-right"></span>
    </div>
  </div>

  <div [style.color]="primaryColor" class="confidence">Confidence: {{action.confidence}}</div>

  <span *ngIf="action.resources?.length > 0" class="show-source" (click)="toggleSource()"><ng-container *ngIf="!showSource">Show source{{action.resources.length > 1 ? 's' : ''}}</ng-container><ng-container *ngIf="showSource">Hide source{{action.resources.length > 1 ? 's' : ''}}</ng-container></span>
  <div *ngIf="showSource" class="reply-sources">
      <!-- Left navigation card -->
    <div class="previous-arrow-container">
      <button aria-label="previous card" class="previous-arrow" (click)="previousSource()">
        <svg *ngIf="action.resources.length > 1" [style.background-color]="primaryColor" [style.fill]="textColor"
            [ngClass]="{'md-inactive' : currentSourceIndex <= 0}" xmlns="http://www.w3.org/2000/svg" width="36" height="36"
            viewBox="0 0 36 36">
          <path d="M23.12 11.12L21 9l-9 9 9 9 2.12-2.12L16.24 18z"/>
          <path d="M0 0h36v36H0z" fill="none"/>
        </svg>
      </button>
    </div>

    <div class="sources-container">
      <swiper id="swiper-cards-console" (indexChange)="onSwiperIndexChange($event)" [config]="SWIPER_CONFIG" #swiperSources>
        <div *ngFor="let source of action.resources; let i = index;" class="swiper-slide source">
          <div>
            <h3 [ngStyle]="source.url != null && source.url != '' && {'cursor': 'pointer'}" (click)="openSourceUrl(source)"
                class="source-title" [title]="source.title" [style.color]="primaryColor">{{source.limitedTitle}}</h3>
            <p class="source-text">{{source.showMore ? source.text : source.limitedText}} 
              <span [style.color]="textColor" (click)="showMore(source)" class="show-more-text" *ngIf="!source.showMore && source.text.length > this.sourceTextLimit">...</span>
            </p>
          </div>

        </div>
      </swiper>
    </div>

    <!-- Right navigation card -->
    <div class="next-arrow-container">
      <button aria-label="next card" class="next-arrow" (click)="nextSource()">
        <svg *ngIf="action.resources.length > 1" [style.background-color]="primaryColor" [style.fill]="textColor"
            [ngClass]="{'md-inactive' : isArrowRightDisabled()}" xmlns="http://www.w3.org/2000/svg" width="36"
            height="36" viewBox="0 0 36 36">
          <path d="M15 9l-2.12 2.12L19.76 18l-6.88 6.88L15 27l9-9z"/>
          <path d="M0 0h36v36H0z" fill="none"/>
        </svg>
      </button>
    </div>
  </div>
</div>
